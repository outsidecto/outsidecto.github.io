<!doctype html> <html lang=en> <head> <meta charset=utf-8 /> <meta http-equiv=X-UA-Compatible content='IE=edge;chrome=1'/> <meta name=viewport content="width=device-width, initial-scale=1, shrink-to-fit=no"> <title>OutsideCTO - Sandi Metz, Practical Object-Oriented Design in Ruby (Book Review)</title> <link rel=alternate type="application/atom+xml" title="Atom Feed" href="/feed.xml"/> <link href="../../../../assets/stylesheets/application-407bf47a.css" rel=stylesheet /> <link href="../../../../assets/stylesheets/syntax-a7a497f1.css" rel=stylesheet /> <link href="https://fonts.googleapis.com/css?family=Lato:400,700&display=swap" rel=stylesheet> <!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script><![endif]--> </head> <body> <nav class="navbar navbar-expand-lg navbar-dark bg-primary"> <a class=navbar-brand href="/">Outside CTO</a> <button class=navbar-toggler type=button data-toggle=collapse data-target="#navbarSupportedContent" aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation"> <span class=navbar-toggler-icon></span> </button> <div class="collapse navbar-collapse" id=navbarSupportedContent> <ul class="navbar-nav mr-auto"> <li class=nav-item> <a class=nav-link href="/about">About/Contact<span class=sr-only>(current)</span></a> </li> <li class=nav-item> <a class=nav-link href="/hipaa/hipaa-00000-index.html">HIPAA from Scratch (free)</a> </li> <li class=nav-item> <a class=nav-link href="/publickey">Key</a> </li> <li class=nav-item> <a class=nav-link href="/blog/">Blog</a> </li> <li class=nav-item> <a class=nav-link href="/clients/">Clients</a> </li> </ul> <link href="//www.findberry.com/search/css/framebox.css" rel=stylesheet /> <script src="//www.findberry.com/search/js/jquery.min.js"></script> <script src="//www.findberry.com/search/js/findberryfx.js"></script> <script src="//www.findberry.com/search/js/findberry.framebox.js"></script> <form class="form-inline my-2 my-lg-0" title="Search Box" action="//www.findberry.com/search/" method=get id=sr_iframe> <input type=hidden name=wid value=12622 /> <input class="form-control-sm mr-sm-2" aria-label=Search id=sr_searchbox name=query size=35 /> <input class="btn btn-outline-success my-2 my-sm-0" id=sr_searchbutton type=submit value=Search /> </form> </div> </nav> <div class="container-fluid pt-5 px-5"> <h1>Sandi Metz, Practical Object-Oriented Design in Ruby (Book Review) <small> by jgn on Sunday, November 25, 2012 in <a href="../../../../category/reviews/">Reviews</a>, <a href="../../../../category/ruby/">Ruby</a>, and <a href="../../../../category/code/">Code</a> </small> </h1> <p>It&#39;s been awhile since I&#39;ve reviewed a book (here are some: <a href="http://7fff.com/category/reviews/">http://7fff.com/category/reviews/</a>), but Sandi Metz&#39;s new one is so good I need to unburden myself.</p> <hr> <p>Sandi Metz&#39;s <em>Practical Object-Oriented Design in Ruby: An Agile Primer</em> ( <a href="http://www.amazon.com/gp/product/0321721330/&amp;tag=jgn09-20">Amazon</a>) may go down as one of those slim classics like <em>The C Programming Language</em> that people actually reread occasionally to learn something besides the obvious &quot;content&quot; of the book.</p> <p>The book provides definitions and rules for the basics of object-oriented design: She provides clear and succinct definitions of SOLID, the Liskov Substitution Principle, the Law of Demeter, etc. These well-known design principles are supplemented with the author&#39;s own rules, such as: &quot;Faced with a problem that composition can solve, you should be biased towards doing so&quot; (p. 184); &quot;Construct public interfaces with an eye toward minimizing the context they require from others&quot; (p. 79). All of that is extremely useful for the novice, and the table of contents and index make this book robust enough to serve as a brief reference.</p> <p>But the title doesn&#39;t lie: It is indeed &quot;practical&quot; and a &quot;primer.&quot; The word &quot;primer&quot; has a boring definition which is &quot;an elementary textbook,&quot; but the more provocative definition typically involves &quot;teaching children to read.&quot; How do you teach children to read? Through stories. This is where the book really shines. If you skim down the table of contents, you&#39;ll see that almost every subsection is verbal. For example, from Chapter 5: &quot;Understanding Duck Typing&quot;; &quot;Overlooking the Duck,&quot; &quot;Compounding the Problem,&quot; &quot;Finding the Duck,&quot; etc. This is a powerful and almost surely a deliberate strategy: Every section is about &quot;doing&quot; something. If you read these sections in order, you will find that when she does get to sections that do provide rules (&quot;Recognize the Antipatterns&quot;, &quot;Insist on Abstraction,&quot; &quot;Honor the Contract&quot; [pp. 158-161]), they are fully justified through the narrative experience of code transformations. I like that. The sections are small enough that if you want a refresher, you won&#39;t have to read a lot of story to get to the moral. Metz has managed to cut out all of the flab that makes so many narrative tutorials so boring. Indeed, they are short enough that someone who already knows the material may reread the sections on, say, object composition, just to see how Metz works it out.</p> <p>Metz writes with the voice of god but is also a judicious god and lets the reader know that solutions are contingent on the requirements of time and money. Even when she is most vociferous insisting: &quot;The rules-of-thumb for testing private methods are thus: Never write them,&quot; she&#39;ll continue: &quot;and if you do, never ever test them, unless of course it makes sense to do so. Therefore, be biased against writing these tests but do not fear to do so if this would improve your lot&quot; (amen, sister). God can tell you not to eat the apple, but she also gives you free will so that you can learn and grow from your own experience.</p> <p>I have one tip for novice readers of this book: When you get to the end, on page 241, please read the book again from the beginning. Metz leaves the chapter on testing until the very end. From personal experience, I have learned that it is almost impossible to teach object-oriented design simultaneously with testing. But after reading Chapter 9, on testing, I think you will reread Chapters 1-8 with new relish. Indeed, I think a nice challenge for the reader would be to write tests or specs for the earlier material, in light of her counsels on testing in Chapter 9.</p> <hr> <p>The book is not perfect. I think there is room for improvement for a second edition. The first thing is that the book needs an annotated bibliography or some kind of guide for future reading. The reason for this is that since Metz writes with the voice of god and makes her case through her narratives, she has a lot of well-earned authority. While she does cite in passing the authors of particular gems (e.g., MiniTest and RSpec on p. 199), I think the reader is starving for advice on &quot;what to do next.&quot; One can say &quot;oh just Google it,&quot; but that&#39;s really the problem since a search engine will bring up so many options. Additionally, I think the book should recognize that it represents a point in time. Providing a list of resources anchors the book in our current historical situation as software developers.</p> <p>My other concern regards Chapter 4. Chapter 4 may be the most important chapter in the book, because it shows how a new class is extracted from a group of classes with messy overlapping concerns -- this goes right to the heart of the &quot;design&quot; question proposed by the book&#39;s title. In my experience, class extraction is one of the harder things for novice developers to understand and practice -- I&#39;m still messing it up. Typically when class extraction is discussed in other books, the assumption is that the smell is obvious, or that the programmer already knows why the class smells. I think such &quot;smell certainty&quot; is far from obvious, and owing to Metz&#39;s style she can make the case elegantly through stories. The problem, though, is that Chapter 4 has only sequence diagrams and no code. (It&#39;s great that there are sequence diagrams: They are neglected in the Ruby world.) One of the things the sequence diagrams does in passing is introduce a class method (Trip.suitable_trips - see p. 66).</p> <p><a href="2012-11-metz1.jpg"><img src="../../../../assets/images/2012-11-metz1-4b1ea2bf.jpg" title=metz1 alt="" width=277 height=323 /></a></p> <p>The only other place a class method has been used before this point is in Chapter 3, with regard to a module. So what&#39;s going on here? (Of course I know why: It&#39;s a finder method on something like an active record class.) The class method is preserved here even in the solution on p. 75. Might I not have a class hierarchy for Trip? Why is this a class method? What <em>is</em> a class method? To be sure, the Trip class is really just in a support role, but I think that absence of code means that the novice reader is going to have a hard time seeing the reality of what is being worked up. I&#39;d also like to see how TripFinder is constructed: The text tells us that it will &quot;embody the rules at the intersection of Customer, Trip, and Bicycle&quot; - do they all get injected at object instantiation? All of this would be resolved with some code examples. They wouldn&#39;t even have to be quoted; they could just exist in the download. (As an aside, I also find it confusing that the the class name Customer is below the instance name (&quot;moe&quot;), while this order is effective reversed for Trip.)</p> <p>One of the things the book does well is to start off with plausible but screwed up class organizations (elsewhere she calls them &quot;booby traps&quot; - pp. 127, 132) which are then cleaned up over the course of chapter. That&#39;s fine, but I think there is an opportunity to return to the beginning and ask how it started on such an awkward footing. The chief finding of Chapter 4 is that the missing class is something called a TripFinder (p. 75). That class is all about responsibility. But what is the use case that started the chapter? Here it is: &quot;A Customer, in order to choose a trip, would like to see a list of available trips of appropriate difficulty, on a specific date, where rental bikes are available&quot; (p. 64). It is interesting to note how this use case diverges from recent thinking about feature definition. As the Cucumber Book has it, &quot;In order to 〈meet some goal〉 As a 〈type of stakeholder〉 I want 〈a feature〉&quot; (p. 31). They go on: &quot;By starting with the goal or value that the feature provides, you’re making it explicit to everyone who ever works on this feature why they’re giving up their precious time. You’re also offering people an opportunity to think about other ways that the goal could be met.&quot; Because the goal is given first (&quot;in order to meet some goal&quot;), and the encouragement is to think about &quot; ways that the goal could be met,&quot; I think that the developer is going to be pushed to think about responsibilities earlier. By making &quot;customer&quot; the subject of the sentence, it is no wonder that the novice&#39;s code starts off with such an impoverished sequence diagram: There is little in the original statement of the use case that makes the key responsibility -- trip finding -- pop out. At the end of this section, I think Metz might return to the original use case, and critique its construction. My bet is that the novice would have been more successful with: &quot;In order to choose a trip, as a customer, I want a list of suitable ones based on difficulty, date, and bike availability.&quot; Now &quot;choosing a trip&quot; comes first.</p> <p>But these are minor concerns of a sustained effort that provides great value. I can&#39;t wait until the next book from Sandi Metz.</p> <div id=disqus_thread></div> <script>
//<![CDATA[
                  var disqus_shortname = 'outsidecto';
          
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
//]]>
</script> <noscript>Please enable JavaScript to view the <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus.</a></noscript> <a href='http://disqus.com' class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a> <script>
//<![CDATA[
    var disqus_shortname = 'outsidecto';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
//]]>
</script> </div> <hr/> <div class="container-fluid footer-padding px-5"> <aside> <h4>Recent Posts</h4> <ol> <li><a href="../../../2018/05/a-middleman-extension-for-categories/">A Middleman Extension for Categories</a> <span>(May 26, 2018)</span></li> <li><a href="../../../2018/03/hansen-great-at-work-how-top-performers-do-less-work-better-and-achieve-more-book-review/">Hansen, Great at Work&#58; How Top Performers Do Less, Work Better, and Achieve More (Book Review)</a> <span>(March 3, 2018)</span></li> <li><a href="../../../2018/02/transitioning-to-programming/">Transitioning to being a Programmer</a> <span>(February 18, 2018)</span></li> <li><a href="../../../2018/02/values/">Values</a> <span>(February 10, 2018)</span></li> <li><a href="../../../2017/09/fournier-the-manager-s-path-a-guide-for-tech-leaders-navigating-growth-and-change-book-review/">Fournier, The Manager's Path&#58; A Guide for Tech Leaders Navigating Growth and Change (Book Review)</a> <span>(September 2, 2017)</span></li> <li><a href="../../../2017/08/sutherland-scrum-the-art-of-doing-twice-the-work-in-half-the-time-book-review/">Sutherland, Scrum&#58; The Art of Doing Twice the Work in Half the Time (Book Review)</a> <span>(August 25, 2017)</span></li> </ol> <h4>Categories</h4> <a href="../../../../category/code/" class="btn btn-default btn-xs">Code <span class='badge badge-secondary'>4</span></a> <a href="../../../../category/iora/" class="btn btn-default btn-xs">Iora <span class='badge badge-secondary'>1</span></a> <a href="../../../../category/kendall-square/" class="btn btn-default btn-xs">Kendall Square <span class='badge badge-secondary'>1</span></a> <a href="../../../../category/management/" class="btn btn-default btn-xs">Management <span class='badge badge-secondary'>1</span></a> <a href="../../../../category/middleman/" class="btn btn-default btn-xs">Middleman <span class='badge badge-secondary'>3</span></a> <a href="../../../../category/rails/" class="btn btn-default btn-xs">Rails <span class='badge badge-secondary'>2</span></a> <a href="../../../../category/reading/" class="btn btn-default btn-xs">Reading <span class='badge badge-secondary'>14</span></a> <a href="../../../../category/reviews/" class="btn btn-default btn-xs">Reviews <span class='badge badge-secondary'>17</span></a> <a href="../../../../category/ruby/" class="btn btn-default btn-xs">Ruby <span class='badge badge-secondary'>6</span></a> <a href="../../../../category/startup-cto-bookshelf/" class="btn btn-default btn-xs">Startup CTO Bookshelf <span class='badge badge-secondary'>2</span></a> <a href="../../../../category/teaching/" class="btn btn-default btn-xs">Teaching <span class='badge badge-secondary'>1</span></a> <a href="../../../../category/technology/" class="btn btn-default btn-xs">Technology <span class='badge badge-secondary'>17</span></a> <a href="../../../../category/uncategorized/" class="btn btn-default btn-xs">Uncategorized <span class='badge badge-secondary'>3</span></a> <a href="../../../../category/values/" class="btn btn-default btn-xs">Values <span class='badge badge-secondary'>1</span></a> <h4>Tags</h4> <a href="/tag/activerecord/" class="btn btn-default btn-xs">activerecord <span class='badge badge-secondary'>1</span></a> <a href="/tag/categories/" class="btn btn-default btn-xs">categories <span class='badge badge-secondary'>1</span></a> <a href="/tag/ruby/" class="btn btn-default btn-xs">ruby <span class='badge badge-secondary'>2</span></a> <a href="/tag/wordpress/" class="btn btn-default btn-xs">wordpress <span class='badge badge-secondary'>2</span></a> <hr/> Check accessibility with <a href="//wave.webaim.org/refer">WAVE</a>. </aside> </div> <footer class=footer> <small style="line-height: 0.8;"> <i>Disclaimer: The views and and opinions expressed in this text belong solely to Outside CTO, LLC, and not to any other group or individual, past, present, or future. No liability is accepted. What is written here does not constitute legal advice. Use at your own risk.</i> &nbsp;&nbsp;&nbsp;&nbsp;&copy; 2007-2021&nbsp;&nbsp;&nbsp;&nbsp;Outside CTO, LLC&nbsp;&nbsp;&nbsp;&nbsp;All Rights Reserved. </small> </footer> <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin=anonymous></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity=sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1 crossorigin=anonymous></script> <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin=anonymous></script> <script src="../../../../assets/javascripts/all-ce8a433c.js"></script> <script>
    $(function() {
      $('input[type="checkbox"]').each(function() {
        var pathname = document.location.pathname;
        var key = pathname + $(this).prop("id");
        $(this).prop("checked", localStorage.getItem(key) == "true");

        $(this).bind("click", function() {
          var pathname = document.location.pathname;
          var key = pathname + $(this).prop("id");
          localStorage.setItem(key, $(this).prop("checked"));
        });
      })
    });
  </script> </body> </html>